# 多相材料模拟软件的输入文件 1.4版

## 格式说明

输入文件包含以下部分：

1. 总体控制参数：

   版本说明

   求解类型

   求解CPU核心数

   控制参数

   计算选项

2. 材料定义

3. 输出控制参数

4. 模型参数：

   单元信息

   节点坐标

   单元内部信息

5. 图形输出控制

6. 工况信息



### 1. 总体控制参数

```bash
version 1.4							#版本说明 1.1版开始添加
Solution type						# 1.3版开始添加模型维度
    1     2                  		#1.表示求解类型；2.模型维度 2 or 3
Solution CPU cores                  #1.2版本开始，增加计算核数控制
    4 
CONTROL PARAMETER
    4,     9                       	#1.模型单元总数；2.模型节点总数 
    4,    16,     0,     0,        	#1.最大边数；2.最大内边数（内节点数）；3.最大面数；4.最大面上节点数。 
    1,     1                 		#1.材料类型总数；2.边界条件总数。 
OPTION								#计算控制选项
    1,    0,    0,    3,    0     
```

##### CONTROL PARAMETER说明：

1.2版本后变为五参数。

```
CONTROL PARAMETER
1.模型节点总数；2.模型单元总数；
1.最大边数；2.最大内边数（内节点数）；3.最大面数；4.最大面上节点数。
1.材料类型总数；2.边界条件总数。 
```

##### 计算控制选项说明：

1.4版本后变为五参数，删除“数据读取类型”，默认Inclusion_data_real_type =3 。

```bash
OPTION
1.互作用应力项, 2.带宽优化, 3.宏观模量, 4.TERM参数, 5.G矩阵积分模式     
```

###### 1. IFLAG_REC：是否考虑互作用应力项；

- IFLAG_REC==0         夹杂和基体都不考虑互作用项
- IFLAG_REC==1         夹杂不考虑互作用项,基体考虑互作用项。  11标识考虑相邻单元的夹杂
- IFLAG_REC==2         夹杂和基体都考虑互作用项。                      12标识考虑相邻单元的夹杂
- IFLAG_REC==3         !夹杂考虑互作用项,基体不考虑互作用项。 13标识考虑相邻单元的夹杂

###### 2. IFLAG_BANDWIDTH_OPTIMIZING：是否带宽优化;

###### 3. IFLAG_homogen：控制是否计算复合材料宏观模量;


###### 4. IFLAG_GET_TERM：是否手动输入GET_TERM里面的各种参数    

###### 5. G_integral_mode G矩阵积分模式：内、外边的插值类型线性还是二次

- G_integral_mode=1：单元边线性积分，内部边线性积分；
- G_integral_mode=2：单元边二次积分，内部边线性积分；
- G_integral_mode=3：单元边线性积分，内部边二次积分；
- G_integral_mode=4：单元边二次积分，内部边二次积分。



### 2. 材料库定义

1.1版开始，模型材料可以定义多种。

```bash
MATERIALS
    1                       #模型厚度 
    1,    0,                #1.材料编号；2.材料种类（0：表示复合材料；1：表示均匀材料）     
72000, 0.33, 700000, 50000 	#基体材料参数：弹性模量,泊松比,屈服应力,切向弹性模量
430000, 0.25, 1e+08, 50000 	#夹杂材料参数：弹性模量,泊松比,屈服应力,切向弹性模量
 4e5                        #界面临界法向应力
    2,    1,                #1.材料编号；2.材料种类（0：表示复合材料；1：表示均匀材料）     
72000, 0.33, 700000, 50000 	#均匀材料参数：弹性模量,泊松比,屈服应力,切向弹性模量 
```

定义每种材料时，第一行：

```
材料编号, 材料种类
```

第二行开始是具体材料参数。（在杂交元中，往往一个单元内含有多种材料，此类单元的材料类型必须选择复合材料）

- 对于均匀材料（单一材料），只需要一行定义材料参数：

```
弹性模量E,泊松比V,屈服应力YEILD_STRESS,切向弹性模量ET
```

- 对于复合材料（多种材料），则需要三行定义材料参数：

```
基体材料参数：弹性模量EO,泊松比VO,屈服应力YEILD_STRESS,切向弹性模量ET
夹杂材料参数：弹性模量EO,泊松比VO,屈服应力YEILD_STRESS,切向弹性模量ET
界面临界法向应力：CRITICAL_STRESS
```



### 3. 输出控制参数

```
OUTPUT PARAMETER
    1,    0,    0,    0,    0    
```

输出控制参数主要为了控制某些单元矩阵的输出，为了便于程序调试：

1. IFLAG_OUTPUT_MODEL：			控制是否输出模型； 

2. IFLAG_OUTPUT_LOCAL_STIFF：  控制是否输出刚度矩阵； 

3. IFLAG_OUTPUT_G_MATRIX：       控制是否输出 G 矩阵；

4. IFLAG_OUTPUT：                           控制是否输出H矩阵等更多信息；

5. 没用 



### 4. 模型参数

#### 单元信息

1.1版开始，单元指定材料编号。

```
单元编号, 单元边数, 单元节点列表, 单元类型, 单元材料编号
```

注意：平面单元节点编号顺序必须是顺时针；单元节点数少于最大节点编号时，用0补齐。

```
CONNECTIVITY
    1,    4,    1,    4,    5,    2,    0,    0,    100,    1    
    2,    4,    2,    5,    6,    3,    0,    0,    100,    2   
    3,    6,    4,    7,    8,    5,    2,    1, 	100,    1   
    4,    4,    5,    8,    9,    6,    0,    0,    100,    1   
```

#### 节点坐标

```
节点编号, 节点坐标（平面问题两个，三维问题三个）
```

```
COORDINATES    
    1,  -1000,   -900    
    2,  -1000,   -850    
    3,  -1000,   -800    
	...
```

#### 单元内外部信息

1.4版开始，默认Inclusion_data_real_type =3，只保留原来的第四种信息输入方式。

```
INCLUSIONS    #关键字
```

 信息的输入方式：每个单元根据读夹杂信息时读入的第二位参数，决定后边的读取方式和内容，这样，可以实现**多种单元**的混合计算。

每个单元开始输入补充信息时，以单元编号开始，然后是信息输入类型。

```
单元编号, 信息类型编号。
```



信息类型包含这些：

- ##### 信息类型：0

  用于没有特别补充信息的单元。

  ```
  1,      0
  ```

  

- ##### 信息类型：1

   针对含椭圆夹杂的Voronoi单元，每个单元一行信息：

  ```
  单元编号, 信息类型, 单元中心坐标Xc,  Yc, 椭圆A轴, B轴, A轴和X轴的夹角
  ```

  例：

  ```
  2,   1,   0.5,   0.5,   0.3,   0.3,   30.0
  ```

  

- ##### 信息类型：2

   针对含椭圆夹杂的Voronoi单元，每个单元两行信息：

  ```
  单元编号, 信息类型, 单元中心坐标Xc, Yc, 椭圆A轴, B轴, A轴和X轴的夹角, 内部节点数
  内部节点坐标
  ```

  例：

  ```bash
  3,      2,   0.5000000   1.5000000   0.3000000   0.3000000   0.0000000   4
  0.2,    0.1,    0.3,    0.4,    0.6,    0.2,    0.3,    0.5     #内部节点坐标
  ```

  

- ##### 信息类型：3

  针对两相材料应力杂交元，每个单元两行信息：

  ```
  单元编号, 信息类型,	开始节点,	结束节点,	内部节点数
  内部节点坐标
  ```

  例：

  ```bash
  4,    3,    2,     4,    1
  -0.5,    0.5  		#内部节点坐标
  ```

  

- ##### 信息类型：4

  针对第一类三相材料应力杂交元，输入材料的三个分界点和三段内部点的点数；下一行输内部点的坐标。（三段内部点的和，再加中心的）

  每个单元两行信息：

  ```
  单元编号, 信息类型, 界面一进入节点, 界面二进入节点, 界面三进入节点, 界面一点数, 界面二点数, 界面三点数
  所有内部点（包含中点）坐标
  ```

  例：

  ```bash
  5,   4,   7,   2,   4，  1,   2，  1 
  -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5,           #所有内部点（包含中点）坐标: 1+2+1+1个中心点，共10个坐标
  ```

  

- ##### 信息类型：5

  针对第二类三相材料应力杂交元，输入材料的四个分界点（一材料到二材料的分界点（入点），二材料到一材料的分界点（出点）；二材料到三材料的分界点（入点），三材料到二材料的分界点（出点）；），和两段内部点的点数；下一行输内部点的坐标。

  每个单元两行信息：

  ```
  单元编号, 信息类型, 界面一开始节点, 界面一结束节点, 界面二开始节点, 界面二结束节点, 界面一点数, 界面二点数
  所有内部点坐标
  ```

  例：

  ```bash
  6,   5,   7,   2,   4，   1,    2,    2， 
  -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5,           #所有内部点（包含中点）坐标: 2+2，共8个坐标
  ```

  

- ##### 信息类型：6

  针对两相材料应力杂交元，输入两相材料的分界点和内部点数；下一行输内部点的坐标；第三行输入夹杂的中心和长短轴和角度。

  ```
  5,    6,   123,   122,    4
   1.50479, 5.76863, 1.53433, 5.52429, 1.65512, 5.30985, 1.84878, 5.15797,
   2.13375, 5.72071, 0.63783, 0.63083, 175.643   
  ```

  

- ##### 信息类型：7

  针对多相材料应力杂交元，输入多相材料的界面相数；

  ```
  单元编号, 信息类型, 界面数
  ```

  下面根据相数循环输入界面信息：	

  ```
  1行：开始节点、结束节点、内部节点数；
  2行：输内部点的坐标；
  3行：输入夹杂的中心和长短轴和角度。
  ```

  例如，单元有四个相界面，就需要输入：

  ```bash
  11,	7,	4
  ...				#12行界面信息
  ```

  例：

  ```bash
  5,        7,      2
  123,      122,        4
  1.50479,  5.76863,  1.53433,  5.52429,  1.65512,  5.30985,  1.84878,  5.15797,
  2.13375,  5.72071, 0.630783, 0.630783,  175.643
  126,      128,        2
  1.50479,  5.76863,  1.53433,  5.52429,
  2.13375,  5.72071, 0.630783, 0.630783,  175.643
  ```

  

- ##### 信息类型：11

  针对含椭圆夹杂、带界面厚度的Voronoi单元，输入夹杂的中心和长短轴和角度、界面相的厚度、和内部点数。

  每个单元两行信息：

  ```
  单元编号, 信息类型, 单元中心坐标Xc, Yc, 椭圆A轴, B轴, A轴和X轴的夹角, 界面相的厚度, 内部节点数
  内部节点坐标
  ```

  例：

  ```bash
    3,      2,    0.5,    1.5,    0.3,    0.3,    0.0,    0.5,   4
  0.2,    0.1,    0.3,    0.4,    0.6,    0.2,    0.3,    0.5     #内部节点坐标
  ```

   

- ##### 信息类型：301

表示普通的三维任意多面体

```
单元号， 普通三维任意多面体代号（301） ，总面数 
```

接着指定每个面的局部连接信息。

```
序号， 这个面上的点数， 局部编号下连接信息（方向指向外）
```



- ##### 信息类型：302

表示带有椭球的三维任意多面体(整个椭球都在一个单元内)

```
单元号， 三维任意多面体代号（302） ，总面数 
```

接着指定每个面的局部连接信息。

```
序号， 这个面上的点数， 局部编号下连接信息（方向指向外）
```

椭球信息。

```
C_X, C_Y,C_Z, A, B, C, theta1,theta2,theta3
N_Huan, N_Dian								椭球的层数, 椭球每次的点数
```



- ##### 信息类型：303

表示带有椭球厚度的三维任意多面体(整个椭球都在一个单元内)

```
单元号， 三维任意多面体代号（303） ，总面数 ，厚度
```

椭球信息。

```
C_X, C_Y,C_Z, A, B, C, theta1,theta2,theta3
N_Huan, N_Dian								椭球的层数, 椭球每次的点数
```



- ##### 信息类型：310

表示带有多相的三维任意多面体(椭球在整个模型内)

```
单元号， 三维任意多面体代号（310） ，总面数 ，相界面总数
```

循环输出每个面的局部连接信息。

```
序号， 这个面上的点数， 局部编号下连接信息（方向指向外）
```




循环输出每个相界面上的内部点信息。

第一行：

界面序号, 椭球的层数, 椭球每次的点数, 内部点数。

```
1,	5,					第一个相界面上的内部点的点数（椭球某一部分在该单元里的曲面上的点）
 C_X, C_Y,C_Z, A, B, C, theta1,theta2,theta3	椭球信息
 x1,y1,z1,										内部点的的坐标
 x2,y2,z2,
 x3,y3,z3,
 ……         			
2,	8,					第二个相界面上的内部点的点数（椭球某一部分在该单元里的曲面上的点）
 C_X, C_Y,C_Z, A, B, C, theta1,theta2,theta3	椭球信息
 x1,y1,z1,										内部点的的坐标
 x2,y2,z2,
 x3,y3,z3,
 …… 
```



### 5. 图形输出控制

1.3版后大大简化。

第一部分：关键字OUTPUT  

第二部分：两个参数

- ​	第一个：基体部分每个积分块绘图是横纵的分块数量，越大图形越好，但越费时间；
- ​	第二个：夹杂部分的分块数量；  

```
OUTPUT  
    5,    2   
```



### 6. 工况信息    

```bash
AUTO LOAD    
   3,   3,   0,   0,   0,   0   #增量步数、给定位移组数、给定外力数、给定均布力组数、给定内压组数、给定绝对温度 
TIME STEP       
    0,  0 						#每个增量步对应的：1.时间增量; 2. 温度增量。
INFORMATION AND VALUES OF PRESCRIBED INCREMENT DISPLACEMENT    
    1,    1,     3   
-0.0025    
    1,    2,    3, 
    2,    0,    3    
    0   
    2,    5,    8, 
    3,    1,    3    
 0.0025   
    7,    8,    9, 
```



## 完整算例

### 算例一

```
version 1.4
Solution type
       1,        2                                     1.求解类型；2.模型维度 
Solution CPU cores
       8                                               1.并行求解的CPU数 
CONTROL PARAMETER
       9,       16                                     1.模型单元总数；2.模型节点总数 
       4,       16,        0,        0,                1.最大边数；2.最大内边数（内节点数）；3.最大面数；5.最大面上节点数。 
       1,        1                                     1.材料类型总数；2.边界条件总数。 
OPTION
       1,        0,        0,        0,        1       计算控制选项：1.考虑互作用选项；2.是否带宽优化;3.控制是否计算复合材料宏观模量;4.是否手动输入GET_TERM里面的各种参数;5内、外边的插值类型：线性还是二次      
MATERIALS
       1                                               模型厚度 
       1,        0                                     1.材料编号；2.材料种类（0：表示复合材料；1：表示均匀材料） 
   72000,     0.33,       20,    50000                 基体材料参数：弹性模量EO,泊松比VO,屈服应力YEILD_STRESS,切向弹性模量ET       
  430000,     0.25,       28,    50000                 夹杂材料参数：弹性模量EO,泊松比VO,屈服应力YEILD_STRESS,切向弹性模量ET       
      80                                               界面临界法向应力：CRITICAL_STRESS       
OUTPUT PARAMETER       
       1,        1,        0,        0,        0       输出控制参数：1.控制是否输出模型； 2.控制是否输出刚度矩阵； 3.控制是否输出 G 矩阵；4.控制是否输出H矩阵等更多信息；5. 没用 
CONNECTIVITY 
       1,        4,        1,        5,        6,        2,        0,        1       
       2,        4,        2,        6,        7,        3,        0,        1       
       3,        4,        3,        7,        8,        4,        0,        1       
       4,        4,        5,        9,       10,        6,        0,        1       
       5,        4,        6,       10,       11,        7,        0,        1       
       6,        4,        7,       11,       12,        8,        0,        1       
       7,        4,        9,       13,       14,       10,        0,        1       
       8,        4,       10,       14,       15,       11,        0,        1       
       9,        4,       11,       15,       16,       12,        0,        1       
COORDINATES       
       1,        0,        0       
       2,        0,        1       
       3,        0,        2       
       4,        0,        3       
       5,        1,        0       
       6,        1,        1       
       7,        1,        2       
       8,        1,        3       
       9,        2,        0       
      10,        2,        1       
      11,        2,        2       
      12,        2,        3       
      13,        3,        0       
      14,        3,        1       
      15,        3,        2       
      16,        3,        3       
INCLUSIONS       
       1,        1,      0.5,      0.5,      0.1,      0.1,        0,       16       
       2,        1,      0.5,      1.5,      0.1,      0.1,        0,       16       
       3,        1,      0.5,      2.5,      0.1,      0.1,        0,       16       
       4,        1,      1.5,      0.5,      0.1,      0.1,        0,       16       
       5,        1,      1.5,      1.5,      0.1,      0.1,        0,       16       
       6,        1,      1.5,      2.5,      0.1,      0.1,        0,       16       
       7,        1,      2.5,      0.5,      0.1,      0.1,        0,       16       
       8,        1,      2.5,      1.5,      0.1,      0.1,        0,       16       
       9,        1,      2.5,      2.5,      0.1,      0.1,        0,       16       
OUTPUT    
       5,        2                                          第一个：基体部分每个积分块绘图是横纵的分块数量，越大图形越好，但越费时间；第二个：夹杂部分的分块数量。                                         
AUTO LOAD       
       2,        3,        0,        0,        0,        0  增量步数、给定位移组数、给定外力数、给定均布力组数、给定内压组数、给定绝对温度 
TIME STEP       
       0,  0                                                每个增量步对应的：1.时间增量; 2. 温度增量。 
INFORMATION AND VALUES OF PRESCRIBED INCREMENT DISPLACEMENT 
       1,        1,        4       
       0       
       1,        2,        3,        4,  
       2,        2,        1       
       0       
       1,  
       3,        1,        4       
 0.00015       
      13,       14,       15,       16,  

```



### 算例二

```
version 1.4
Solution type
       1,        2                                     1.求解类型；2.模型维度 
Solution CPU cores
       4                                               1.并行求解的CPU数 
CONTROL PARAMETER
       4,        9                                     1.模型单元总数；2.模型节点总数 
       4,       16,        0,        0,                1.最大边数；2.最大内边数（内节点数）；3.最大面数；5.最大面上节点数。 
       1,        1                                     1.材料类型总数；2.边界条件总数。 
OPTION
       1,        0,        0,        0,        1       计算控制选项：1.考虑互作用选项；2.是否带宽优化;3.控制是否计算复合材料宏观模量;4.是否手动输入GET_TERM里面的各种参数;5内、外边的插值类型：线性还是二次      
MATERIALS
       1                                               模型厚度 
       1,        0                                     1.材料编号；2.材料种类（0：表示复合材料；1：表示均匀材料） 
   72000,     0.33,   700000,    14500                 基体材料参数：弹性模量EO,泊松比VO,屈服应力YEILD_STRESS,切向弹性模量ET       
  430000,     0.25,    1e+08,    50000                 夹杂材料参数：弹性模量EO,泊松比VO,屈服应力YEILD_STRESS,切向弹性模量ET       
     9.7                                               界面临界法向应力：CRITICAL_STRESS       
OUTPUT PARAMETER       
       1,        1,        1,        1,        0       输出控制参数：1.控制是否输出模型； 2.控制是否输出刚度矩阵； 3.控制是否输出 G 矩阵；4.控制是否输出H矩阵等更多信息；5. 没用 
CONNECTIVITY 
       1,        4,        1,        2,        5,        4,        0,        1       
       2,        4,        4,        5,        8,        7,        0,        1       
       3,        4,        2,        3,        6,        5,        0,        1       
       4,        4,        5,        6,        9,        8,        0,        1       
COORDINATES       
       1,       -1,        1       
       2,       -1,        0       
       3,       -1,       -1       
       4,        0,        1       
       5,        0,        0       
       6,        0,       -1       
       7,        1,        1       
       8,        1,        0       
       9,        1,       -1       
INCLUSIONS       
       1,        1,     -0.5,      0.5,      0.1,      0.1,        0,       16       
       2,        1,      0.5,      0.5,      0.1,      0.1,        0,       16       
       3,        1,     -0.5,     -0.5,      0.1,      0.1,        0,       16       
       4,        1,      0.5,     -0.5,      0.1,      0.1,        0,       16       
OUTPUT    
       5,        2                                          第一个：基体部分每个积分块绘图是横纵的分块数量，越大图形越好，但越费时间；第二个：夹杂部分的分块数量。                                         
AUTO LOAD       
       3,        3,        0,        0,        0,        0  增量步数、给定位移组数、给定外力数、给定均布力组数、给定内压组数、给定绝对温度 
TIME STEP       
       0,  0                                                每个增量步对应的：1.时间增量; 2. 温度增量。 
INFORMATION AND VALUES OF PRESCRIBED INCREMENT DISPLACEMENT 
       1,        1,        3       
       0       
       1,        2,        3,  
       2,        2,        1       
       0       
       2,  
       3,        1,        3       
  0.0001       
       7,        8,        9,  

```

