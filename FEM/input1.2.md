# 多相材料模拟软件的输入文件 1.2版

## 格式说明

输入文件包含以下部分：

1. 总体控制参数：
   版本说明

   求解类型

   求解CPU核心数

   控制参数

   计算选项

2. 材料定义

3. 输出控制参数

4. 模型参数：

   单元信息

   节点坐标

   单元内部信息

5. 图形输出控制

6. 工况信息



### 1. 总体控制参数

```bash
version 1.2							# 版本说明 1.1版开始添加
Solution type						# 1.1版开始添加
    1                       		# 求解类型；
Solution CPU cores                  # 1.2版本开始，增加计算核数控制
    4 
CONTROL PARAMETER
    9                        		#模型节点总数 
    4,    4,     18,   1,    1      #1.模型单元总数；2.最大边数；；3.最大内边数；4.材料类型总数；5.边界条件总数。
OPTION								#计算控制选项
    1,    0,    0,    0,    0,     1   
```

##### CONTROL PARAMETER说明：

1.2版本后变为五参数。

```
CONTROL PARAMETER
模型节点总数 
1.模型单元总数；2.最大边数；；3.最大内边数；4.材料类型总数；5.边界条件总数。
```

##### OPTION 计算控制选项说明：

1.2版本后变为六参数。

```bash
OPTION
1.互作用应力项, 2.带宽优化, 3.宏观模量, 4.数据读取类型, 5.TERM参数, 6.G矩阵积分模式     
```

###### 1. IFLAG_REC：是否考虑互作用应力项；

- IFLAG_REC==0         夹杂和基体都不考虑互作用项
- IFLAG_REC==1         夹杂不考虑互作用项,基体考虑互作用项。  11标识考虑相邻单元的夹杂
- IFLAG_REC==2         夹杂和基体都考虑互作用项。                      12标识考虑相邻单元的夹杂
- IFLAG_REC==3         !夹杂考虑互作用项,基体不考虑互作用项。 13标识考虑相邻单元的夹杂

###### 2. IFLAG_BANDWIDTH_OPTIMIZING：是否带宽优化;

###### 3. IFLAG_homogen：控制是否计算复合材料宏观模量;

###### 4. Inclusion_data_real_type：夹杂数据读取类型;

- Inclusion_data_real_type =0 时，读取夹杂中心坐标、夹杂A、B轴和夹角（只能算**夹杂单元和普通单元**）

- Inclusion_data_real_type =1 时，读取夹杂中心坐标、内部节点数和节点坐标（只能算**夹杂单元和普通单元**）

- Inclusion_data_real_type =2 时，读取多材料的界面节点数和节点坐标（只能算**多相材料单元和普通单元**）

- Inclusion_data_real_type =3 时，每个单元根据读夹杂信息时读入的第二位参数，决定后边的读取方式和内容，这样，可以实现**多种单元**的混合计算。


###### 5. IFLAG_GET_TERM：是否手动输入GET_TERM里面的各种参数    

###### 6. G_integral_mode G矩阵积分模式：内、外边的插值类型线性还是二次

- G_integral_mode=1：单元边线性积分，内部边线性积分；
- G_integral_mode=2：单元边二次积分，内部边线性积分；
- G_integral_mode=3：单元边线性积分，内部边二次积分；
- G_integral_mode=4：单元边二次积分，内部边二次积分。



### 2. 材料库定义

1.1版开始，模型材料可以定义多种。

```bash
MATERIALS
    1                       #模型厚度 
    1,    0,                #1.材料编号；2.材料种类（0：表示复合材料；1：表示均匀材料）     
72000, 0.33, 700000, 50000 	#基体材料参数：弹性模量,泊松比,屈服应力,切向弹性模量
430000, 0.25, 1e+08, 50000 	#夹杂材料参数：弹性模量,泊松比,屈服应力,切向弹性模量
 4e5                        #界面临界法向应力
    2,    1,                #1.材料编号；2.材料种类（0：表示复合材料；1：表示均匀材料）     
72000, 0.33, 700000, 50000 	#均匀材料参数：弹性模量,泊松比,屈服应力,切向弹性模量 
```

定义每种材料时，第一行：

```
材料编号, 材料种类
```

第二行开始是具体材料参数。（在杂交元中，往往一个单元内含有多种材料，此类单元的材料类型必须选择复合材料）

- 对于均匀材料（单一材料），只需要一行定义材料参数：

```
弹性模量E,泊松比V,屈服应力YEILD_STRESS,切向弹性模量ET
```

- 对于复合材料（多种材料），则需要三行定义材料参数：

```
基体材料参数：弹性模量EO,泊松比VO,屈服应力YEILD_STRESS,切向弹性模量ET
夹杂材料参数：弹性模量EO,泊松比VO,屈服应力YEILD_STRESS,切向弹性模量ET
界面临界法向应力：CRITICAL_STRESS
```



### 3. 输出控制参数

```
OUTPUT PARAMETER
    1,    0,    0,    0,    0    
```

输出控制参数主要为了控制某些单元矩阵的输出，为了便于程序调试：

1. IFLAG_OUTPUT_MODEL：			控制是否输出模型； 

2. IFLAG_OUTPUT_LOCAL_STIFF：  控制是否输出刚度矩阵； 

3. IFLAG_OUTPUT_G_MATRIX：      控制是否输出 G 矩阵；

4. (还没写)IFLAG_OUTPUT：            控制是否输出更多；

5. 没用 



### 4. 模型参数

#### 单元信息

1.1版开始，单元指定材料编号。

```
单元编号, 单元边数, 单元节点列表, 单元类型, 单元材料编号
```

注意：平面单元节点编号顺序必须是顺时针；单元节点数少于最大节点编号时，用0补齐。

```
CONNECTIVITY
    1,    4,    1,    4,    5,    2,    0,    0,    100,    1    
    2,    4,    2,    5,    6,    3,    0,    0,    100,    2   
    3,    6,    4,    7,    8,    5,    2,    1, 	100,    1   
    4,    4,    5,    8,    9,    6,    0,    0,    100,    1   
```

#### 节点坐标

```
节点编号, 节点坐标（只能计算平面问题、两个）
```

```
COORDINATES    
    1,  -1000,   -900    
    2,  -1000,   -850    
    3,  -1000,   -800    
	...
```

#### 单元内外部信息

```
INCLUSIONS    #关键字
```

内部信息的输入方式：

#####  第一种方式

当Inclusion_data_real_type =0 时，读取夹杂中心坐标、夹杂A、B轴和夹角（只能算**夹杂单元和普通单元**）

```
1,   0.5,   0.5,   0.3,   0.3,   30.0
```

单元编号, 单元中心坐标Xc,  Yc, 椭圆A轴, B轴, A轴和X轴的夹角

##### 第二种方式

当Inclusion_data_real_type =1 时，读取夹杂中心坐标、内部节点数和节点坐标（只能算**夹杂单元和普通单元**）

 每个单元两行信息：

```
单元编号, 单元中心坐标Xc,  Yc, 椭圆A轴, B轴, A轴和X轴的夹角, 内部节点数
内部节点坐标
```

例：

```bash
  3,   0.5,   0.5,   0.3,   0.3,   30.0,     4
0.2,   0.1,   0.3,   0.4,   0.6,    0.2,   0.3,    0.5      	#内部节点坐标
```



##### 第三种方式

当Inclusion_data_real_type =2 时，读取多材料的界面节点数和节点坐标（模型中只能有**多相材料单元和普通单元**）

 每个单元两行信息：

```
单元编号	开始节点	结束节点	内部节点数
内部节点坐标
```

例：

```bash
    4,      2,      4,      2
 -0.5,    0.5,    0.7,    0.8  #内部节点坐标
```



##### 第四种方式

当Inclusion_data_real_type =3 时，每个单元根据读夹杂信息时读入的第二位参数，决定后边的读取方式和内容，这样，可以实现**多种单元**的混合计算。

每个单元开始输入补充信息时，以单元编号开始，然后是信息输入类型。

```
单元编号, 信息类型编号。
```



信息类型包含这些：

- ##### 信息类型：0

  用于没有特别补充信息的单元。

  ```
  1,      0
  ```

  

- ##### 信息类型：1

   针对含椭圆夹杂的Voronoi单元，每个单元一行信息：

  ```
  单元编号, 信息类型, 单元中心坐标Xc,  Yc, 椭圆A轴, B轴, A轴和X轴的夹角
  ```

  例：

  ```
  2,   1,   0.5,   0.5,   0.3,   0.3,   30.0
  ```

  

- ##### 信息类型：2

   针对含椭圆夹杂的Voronoi单元，每个单元两行信息：

  ```
  单元编号, 信息类型, 单元中心坐标Xc, Yc, 椭圆A轴, B轴, A轴和X轴的夹角, 内部节点数
  内部节点坐标
  ```

  例：

  ```bash
  3,      2,   0.5000000   1.5000000   0.3000000   0.3000000   0.0000000   4
  0.2,    0.1,    0.3,    0.4,    0.6,    0.2,    0.3,    0.5     #内部节点坐标
  ```

  

- ##### 信息类型：3

  针对两相材料应力杂交元，每个单元两行信息：

  ```
  单元编号, 信息类型,	开始节点,	结束节点,	内部节点数
  内部节点坐标
  ```

  例：

  ```bash
  4,    3,    2,     4,    1
  -0.5,    0.5  		#内部节点坐标
  ```

  

- ##### 信息类型：4

  针对第一类三相材料应力杂交元，输入材料的三个分界点和三段内部点的点数；下一行输内部点的坐标。（三段内部点的和，再加中心的）

  每个单元两行信息：

  ```
  单元编号, 信息类型, 界面一进入节点, 界面二进入节点, 界面三进入节点, 界面一点数, 界面二点数, 界面三点数
  所有内部点（包含中点）坐标
  ```

  例：

  ```bash
  5,   4,   7,   2,   4，  1,   2，  1 
  -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5,           #所有内部点（包含中点）坐标: 1+2+1+1个中心点，共10个坐标
  ```

  

- ##### 信息类型：5

  针对第二类三相材料应力杂交元，输入材料的四个分界点（一材料到二材料的分界点（入点），二材料到一材料的分界点（出点）；二材料到三材料的分界点（入点），三材料到二材料的分界点（出点）；），和两段内部点的点数；下一行输内部点的坐标。

  每个单元两行信息：

  ```
  单元编号, 信息类型, 界面一开始节点, 界面一结束节点, 界面二开始节点, 界面二结束节点, 界面一点数, 界面二点数
  所有内部点坐标
  ```

  例：

  ```bash
  6,   5,   7,   2,   4，   1,    2,    2， 
  -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5,           #所有内部点（包含中点）坐标: 2+2，共8个坐标
  ```

  

- ##### 信息类型：6

  针对两相材料应力杂交元，输入两相材料的分界点和内部点数；下一行输内部点的坐标；第三行输入夹杂的中心和长短轴和角度。

  ```
  5,    6,   123,   122,    4
   1.50479, 5.76863, 1.53433, 5.52429, 1.65512, 5.30985, 1.84878, 5.15797,
   2.13375, 5.72071, 0.63783, 0.63083, 175.643   
  ```

  

### 5. 图形输出控制

这部分在老版本里都需要，在1.3版就不用了。

第一部分：关键字OUTPUT  

第二部分：五个参数

- ​	第一个：输出几个图形； 
- ​	第二个：基体部分每个积分块绘图是横纵的分块数量，越大图形越好，但越费时间；
- ​	第三个：夹杂部分的分块数量； 
- ​	第四个：是否画变形前的图； 
- ​	第五个：变形图的变形放大倍数。   

第三行部分：每行两个参数  ，行数等于输出的图形数

- 第一参数：0:变形图;1:云图;2黑白云图;3等值线;4等差线;5等倾线;6黑白等值线。 
- 第二个参数：应力类型（1水平正应力；2竖直正应力；3切应力）    

```
OUTPUT  
    4,    5,    2,    1,   100            
    0,    1             
    3,    1    
    3,    2                                                   
    3,    3                
```

第四部分：画图时应力分量的范围

（在子程序GET_NODE_STRESS会根据节点力计算应力范围。如果需要指定可以去子程序中注销该部分,288行左右）

```
STRESS_X_range:                                                                           
    1,   5.2    
STRESS_Y_range:    
  -0.74,   1.2    
STRESS_XY_range:    
  -1.1,   1.1  
```

  

### 6. 工况信息    

```bash
AUTO LOAD    
    1,    3,    0                    #增量步数、给定位移组数、给定外力数
TIME STEP    
    0   
INFORMATION AND VALUES OF PRESCRIBED INCREMENT DISPLACEMENT    
    1,    1,     3   
-0.0025    
    1,    2,    3, 
    2,    0,    3    
    0   
    2,    5,    8, 
    3,    1,    3    
 0.0025   
    7,    8,    9, 
```



## 完整算例

### 算例一

```
version 1.2
Solution type
       1       
Solution CPU cores
       4       
CONTROL PARAMETER
       9                                               模型节点总数 
       4,        4,       16,        1,        1         1.模型单元总数；2.最大边数；3.最大内边数（内节点数）；4.材料类型总数；5.边界条件总数。 
OPTION
       1,        0,        0,        0,        0,        1         计算控制选项：1.IFLAG_REC：是否考虑互作用应力项；2.IFLAG_BANDWIDTH_OPTIMIZING：是否带宽优化;3.IFLAG_homogen:控制是否计算复合材料宏观模量;4.Inclusion_data_real_type:夹杂数据读取类型;5.IFLAG_GET_TERM:是否手动输入GET_TERM里面的各种参数;6内、外边的插值类型：线性还是二次        
MATERIALS
       1                                               模型厚度 
       1,        0,                                     1.材料编号；2.材料种类（0：表示复合材料；1：表示均匀材料）                                 
   72000,     0.33,   700000,    14500                 基体材料参数：弹性模量EO,泊松比VO,屈服应力YEILD_STRESS,切向弹性模量ET       
  430000,     0.25,    1e+08,    50000                 夹杂材料参数：弹性模量EO,泊松比VO,屈服应力YEILD_STRESS,切向弹性模量ET       
     9.7                                               界面临界法向应力：CRITICAL_STRESS       
OUTPUT PARAMETER       
       1,        1,        1,        1,        0        输出控制参数：1. IFLAG_OUTPUT_MODEL：控制是否输出模型；  2. IFLAG_OUTPUT_LOCAL_STIFF：控制是否输出刚度矩阵；  3. IFLAG_OUTPUT_G_MATRIX：控制是否输出 G 矩阵；4. (还没写)IFLAG_OUTPUT：控制是否输出更多；5. 没用       
CONNECTIVITY       
       1,        4,        1,        2,        5,        4,        0,        1       
       2,        4,        4,        5,        8,        7,        0,        1       
       3,        4,        2,        3,        6,        5,        0,        1       
       4,        4,        5,        6,        9,        8,        0,        1       
COORDINATES       
       1,       -1,        1       
       2,       -1,        0       
       3,       -1,       -1       
       4,        0,        1       
       5,        0,        0       
       6,        0,       -1       
       7,        1,        1       
       8,        1,        0       
       9,        1,       -1       
INCLUSIONS       
       1,     -0.5,      0.5,      0.1,      0.1,        0       
       2,      0.5,      0.5,      0.1,      0.1,        0       
       3,     -0.5,     -0.5,      0.1,      0.1,        0       
       4,      0.5,     -0.5,      0.1,      0.1,        0       
OUTPUT    
       4,        5,        2,        1,      100                           第一个：输出几个图形；  第二个：基体部分每个积分块绘图是横纵的分块数量，越大图形越好，但越费时间；第三个：夹杂部分的分块数量；  第四个：是否画变形前的图； 第五个：变形图的变形放大倍数。                          
       0,        1                                                        第一参数：0:变形图;1:云图;2黑白云图;3等值线;4等差线;5等倾线;6黑白等值线。 第二个参数：应力类型（1水平正应力；2竖直正应力；31切应力）                                                       
       3,        1                                                        第一参数：0:变形图;1:云图;2黑白云图;3等值线;4等差线;5等倾线;6黑白等值线。 第二个参数：应力类型（1水平正应力；2竖直正应力；31切应力）                                                       
       3,        2                                                        第一参数：0:变形图;1:云图;2黑白云图;3等值线;4等差线;5等倾线;6黑白等值线。 第二个参数：应力类型（1水平正应力；2竖直正应力；31切应力）                                                       
       3,        3                                                        第一参数：0:变形图;1:云图;2黑白云图;3等值线;4等差线;5等倾线;6黑白等值线。 第二个参数：应力类型（1水平正应力；2竖直正应力；31切应力）                                                       
STRESS_X_range:                                                                           
    1,   5.2    
STRESS_Y_range:    
  -0.74,   1.2    
STRESS_XY_range:    
  -1.1,   1.1      
       
AUTO LOAD       
       3,        3,        0                                        增量步数、给定位移组数、给定外力数                                                
TIME STEP       
       0       
INFORMATION AND VALUES OF PRESCRIBED INCREMENT DISPLACEMENT       
       1,        1,        3       
       0       
       1,        2,        3,  
       2,        2,        1       
       0       
       2,  
       3,        1,        3       
  0.0001       
       7,        8,        9,  

```

### 算例二

```
version 1.2
Solution type
       1       
Solution CPU cores
       1       
CONTROL PARAMETER
      25                                               模型节点总数 
       4,       10,        3,        1,        1         1.模型单元总数；2.最大边数；3.最大内边数（内节点数）；4.材料类型总数；5.边界条件总数。 
OPTION
       3,        0,        0,        3,        2,        1         计算控制选项：1.IFLAG_REC：是否考虑互作用应力项；2.IFLAG_BANDWIDTH_OPTIMIZING：是否带宽优化;3.IFLAG_homogen:控制是否计算复合材料宏观模量;4.Inclusion_data_real_type:夹杂数据读取类型;5.IFLAG_GET_TERM:是否手动输入GET_TERM里面的各种参数;6内、外边的插值类型：线性还是二次        
  1,   0,    0,  25,   42,    1,   20,  20,   50         计算控制选项：1.N_TERM_POL：多项式应力函数的系数个数；2.N_TERM_REC：互作用应力函数的基本系数个数;3.N_TERM_IN：夹杂应力函数的系数总数;4.N_REC：互作用应力函数的基本系数组数;5.N_GAUSS：基体的积分点数或是靠近单元节点区域的积分点数；6.N_GAUSS_IN：靠近夹杂界面节点区域的积分点数；7.N_GAUSS_G：计算G矩阵时沿边的一维积分点数        
MATERIALS
       1                                               模型厚度 
       1,        0,                                     1.材料编号；2.材料种类（0：表示复合材料；1：表示均匀材料）                                 
   72000,     0.33,    10,     7200                 基体材料参数：弹性模量EO,泊松比VO,屈服应力YEILD_STRESS,切向弹性模量ET       
  2180,     0.5,    1e+08,    43000                 夹杂材料参数：弹性模量EO,泊松比VO,屈服应力YEILD_STRESS,切向弹性模量ET       
   1e+08                                               界面临界法向应力：CRITICAL_STRESS       
OUTPUT PARAMETER       
       1,        1,        0,        0,        0        输出控制参数：1. IFLAG_OUTPUT_MODEL：控制是否输出模型；  2. IFLAG_OUTPUT_LOCAL_STIFF：控制是否输出刚度矩阵；  3. IFLAG_OUTPUT_G_MATRIX：控制是否输出 G 矩阵；4. (还没写)IFLAG_OUTPUT：控制是否输出更多；5. 没用       
CONNECTIVITY        
       1,       10,        4,       14,        2,       15,       11,       16,       12,       10,        8,       17,           102,        1       
       2,       10,       11,       18,        1,       19,        3,       20,        9,       10,       12,       16,             102,        1       
       3,       10,        3,       21,        5,       22,        7,       23,       13,       10,        9,       20,             102,        1       
       4,       10,        7,       24,        6,       25,        4,       17,        8,       10,       13,       23,             102,        1       
COORDINATES       
       1,      0.8,      1.3       
       2,      0.8,      1.7       
       3,        1,      1.3       
       4,        1,      1.7       
       5,      1.2,      1.3       
       6,      1.2,      1.7       
       7,      1.2,      1.5       
       8,        1,      1.55       
       9,        1,      1.45      
      10,        1,      1.5       
      11,      0.8,      1.5       
      12,      0.95,      1.5       
      13,      1.05,      1.5       
      14,      0.9,      1.7       
      15,      0.8,      1.6       
      16,     0.85,      1.5       
      17,        1,     1.65       
      18,      0.8,      1.4       
      19,      0.9,      1.3       
      20,        1,     1.35       
      21,      1.1,      1.3       
      22,      1.2,      1.4       
      23,     1.15,      1.5       
      24,      1.2,      1.6       
      25,      1.1,      1.7       
INCLUSIONS       
       1,        6,        8,       12,        3       
0.980866,  1.54619, 0.964645,  1.53536, 0.953806,  1.51913,  
       1,      1.5,      0.05,      0.05,        0       
       2,        6,       12,        9,        3       
0.953806,  1.48087, 0.964645,  1.46464, 0.980866,  1.45381,  
       1,      1.5,      0.05,      0.05,        0         
       3,        6,        9,       13,        3       
 1.01913,  1.45381,  1.03536,  1.46464,  1.04619,  1.48087,  
       1,      1.5,      0.05,      0.05,        0        
       4,        6,       13,        8,        3       
1.04619,  1.51913,  1.03536,  1.53536,  1.01913,  1.54619,  
       1,      1.5,      0.05,      0.05,        0          
OUTPUT    
       4,       10,        5,        1,      100                           第一个：输出几个图形；  第二个：基体部分每个积分块绘图是横纵的分块数量，越大图形越好，但越费时间；第三个：夹杂部分的分块数量；  第四个：是否画变形前的图； 第五个：变形图的变形放大倍数。                          
       0,        1                                                        第一参数：0:变形图;1:云图;2黑白云图;3等值线;4等差线;5等倾线;6黑白等值线。 第二个参数：应力类型（1水平正应力；2竖直正应力；31切应力）                                                       
       3,        1                                                        第一参数：0:变形图;1:云图;2黑白云图;3等值线;4等差线;5等倾线;6黑白等值线。 第二个参数：应力类型（1水平正应力；2竖直正应力；31切应力）                                                       
       3,        2                                                        第一参数：0:变形图;1:云图;2黑白云图;3等值线;4等差线;5等倾线;6黑白等值线。 第二个参数：应力类型（1水平正应力；2竖直正应力；31切应力）                                                       
       3,        3                                                        第一参数：0:变形图;1:云图;2黑白云图;3等值线;4等差线;5等倾线;6黑白等值线。 第二个参数：应力类型（1水平正应力；2竖直正应力；31切应力）                                                       
STRESS_X_range:                                                                           
    1,   5.2    
STRESS_Y_range:    
  -0.74,   1.2    
STRESS_XY_range:    
  -1.1,   1.1  
       
AUTO LOAD       
       3,        5,        0                                        增量步数、给定位移组数、给定外力数
TIME STEP       
       1       
INFORMATION AND VALUES OF PRESCRIBED INCREMENT DISPLACEMENT       
       1,        1,        5       
       0       
       1,        2,       11,       15,       18
       2,        0,        5       
       0       
       1,        2,       11,       15,       18  
       3,        0,        10       
       0       
       2,       14,       4,       25,        6,       1,    19,  3,   21,  5
       4,        0,        5       
       0       
       5,        6,        7,       22,       24
       5,        1,        5       
       0.00015       
       5,        6,        7,       22,       24   
```

