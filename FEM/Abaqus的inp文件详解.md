# Abaqus的inp文件详解

参考：

[abaqus inp文件精讲 - 百度文库 (baidu.com)](https://wenku.baidu.com/view/4cf4cd0dba1aa8114431d926.html)

[教你学会看&写 input 文件 - 简书 (jianshu.com)](https://www.jianshu.com/p/8c4d45b089b6)

**1. inp文件的作用**

> inp文件是一种文本文件，拓展名为.inp。包含了整个模型的完整描述，在前处理器（abaqus/cae）和求解器（abaqus/standard或abaqus/explicit）之间建立一个传递数据的桥梁。
> 求解器的分析对象都是.inp文件，而不是.cae文件，在abaqus早期版本中，并没有abaqus/cae这一前处理器，用户只能直接使用inp文件来建模。
> inp文件可以更方便地修改模型参数，控制分析过程，还可以完成一些abaqus/cae所不支持地功能。

**2. inp文件的生成方法**

> 各种常用的前处理器（例如MSC.PATRAN、FEMAP）都支持以inp文件的格式来输出模型。在abaqus/cae中，如果在Job功能模块中提交分析作业，或者点击Job Manager对话框中的Write Input，就会在默认的工作目录中生成inp文件。

**3. inp文件的格式**

> inp文件由一系列的数据块构成，每个数据块描述模型的某部分特定信息。一个数据块总是以带有*号的关键词（keyword）开始，其后往往带有相应的参数，以及一个或多个数据行（data line）。（具体可以在《ABAQUS Keyword Reference Manual》中查到每个关键词的用法以及每个关键词应出现在inp文件的什么位置）
> 1）若以**开头，则为注释行
> 2）整个inp文件不应该有空行，否则会出现异常错误；
> 3）关键词、参数、集合名称、面的名称不区分大小写；
> 4）每一行不超过256个字符。*element要求每个数据行包含的节点数不超过15个，总共最多80个字符；*elset和*nset要求每个数据行包含的数据不超过16个，若超过，超出部分会被忽略；
> 5）若在一行的结束需要换行时，则在此行的末尾加上逗号，表示下一行是这一行的延续；
> 6）词与词之间的空格或制表符不影响其内容；
> 7）在关键词和各个参数之间，以及数据行的各个数据之间都要用逗号分隔。（如果一个数据行只包含一个数据项，也要在结尾处加上一个逗号。）

**4. inp文件的结构**

### 2.3. 最特殊的关键字 *heading

这个关键字特殊就特殊在每一个完整的 input 文件几乎都是以他开始的，这个关键字没有任何参数，他的数据行没有固定的格式，你可以写任意多行的数据，但是只有第一行的前 80 个字符起作用，这些字符将会显示在 OBD 的“Title Block”（默认位置在窗口下方，以左对齐方式显示）中，其他的只能自己看看。这个其实对应着 CAE 中的 job 编辑器的 description 栏。此处我们将展示出文本的第一个实例，该例题来自于 [Abaqus Example Problems Guide](https://links.jianshu.com/go?to=http%3A%2F%2Fdell-pc%3A2080%2Fv6.13%2Fbooks%2Fexa%2Fdefault.htm) >> [3.1.1 Symmetric results transfer for a static tire analysis](https://links.jianshu.com/go?to=http%3A%2F%2Fdell-pc%3A2080%2Fv6.13%2Fbooks%2Fexa%2Fch03s01aex87.html)。注意： title block 的第二行太长而特意拆分成了多行显示

![img](..\images\heading)

我们可以看到`*heading` 和 `*restart`（即第二个关键字行）之间的部分全部为 `*heading` 的数据。而且只有第一行被写入了 ODB 的 title。

把上面这个 input 文件的结构列一下就是这样的（为了显示嵌套关系进行了缩进处理），这个结构很清晰了吧。

![img](..\images\webp)

```
*Heading

** Job name: Plate-CPS8 Model name: Model-1

**----------------------------------------------------------------------------------------------------------------------------------------------------

**INP 文件总是以*Heading开头，接下来可以用一行或多行来写下此模型的标题和相关信息.

**----------------------------------------------------------------------------------------------------------------------------------------------------

*Preprint, echo=NO, model=NO, history=NO, contact=NO

**----------------------------------------------------------------------------------------------------------------------------------------------------

**Preprint可设置在DAT文件（*.dat)中记录的内容。上述为ABAQUS默认，内容为：在DAT文件

**中不记录对INP文件的处理过程，以及详细的模型和历史数据。

**----------------------------------------------------------------------------------------------------------------------------------------------------

** PARTS

*Part, name=Plate1

**----------------------------------------------------------------------------------------------------------------------------------------------------

**定义Part的标准格式：*Part，name=部件名称

**对于非独立实体，比如此例，要在下面数据块中定义详细的节点，单元，截面属性等数据。以便Mesh时，**Mesh在Part上面；

**对于独立实体，则Part数据块只包含*Part和*End Part两行，而没有实质性的数据。节点，单元，截面属**性等数据将在Instance数据块中定义，而

**Mesh时也只能在Instance上面做。

**

**如果INP文件是由Abaqus/CAE生成的，其结构会包括部件*Part，装配件*Assembly，实体*Instance等数**据块，比如此例。

**如果INP文件是由其他前处理器如MSC，PATRAN，FEMAP等生成的，其结构将不包含部件，装配件和实**体等数据块，而是直接定义节点和单元等数据。

**----------------------------------------------------------------------------------------------------------------------------------------------------

*Node

**----------------------------------------------------------------------------------------------------------------------------------------------------

**节点定义以*Node开始

**节点的基本表示方法：

**一维模型：节点编号，节点坐标

**二维模型：节点编号，节点坐标1，节点坐标2

**三维模型：节点编号，节点坐标1，节点坐标2，节点坐标3

**注意：1.节点编号可以不从1开始也可以是不连续的。

**注意：2.在INP文件中，不同的部件或实体可以有相同的节点或单元编号。比如，部件Part-A的节点编号**是1，2，3...,部件Par-B的节点编号也可以

**是1，2，3，...

**注意：3.如果在定义荷载Load，边界条件BC或约束Constraint是需要引用这些节点编号，需要加上相应**的 实体 名称作为前缀。例如，部件Part-A和

**部件Part-B的相应 实体 分别名为Part—A-1和Part-B-1,则实体Part-A-1的节点记作Part-A-1. 5，而实体**Part-B-1的节点5记作Part-B-1. 5

**----------------------------------------------------------------------------------------------------------------------------------------------------

​     1,          0.,        27.5

​     2,          0.,          5.

​     3,  3.53553391,  3.53553391

**省略若干节点

   279,  10.1391716,  28.3766441

   280,  4.99425983,  29.4102631

   281,          0.,     30.3125

*Element, type=CPS8

**----------------------------------------------------------------------------------------------------------------------------------------------------

**单元的定义方法：*Element，type=单元类型

**               单元编号，节点1编号，节点2编号，节点三编号...

**----------------------------------------------------------------------------------------------------------------------------------------------------

 1,  1,  12,  57, 23, 102, 103, 104, 105

 2, 12,  13,  58, 57, 106, 107, 108, 103

 3, 13,  14,  59, 58, 109, 110, 111, 107

**省略若干单元

78,  99, 100,  22,  21, 273, 279, 126, 278

79, 100, 101,  23,  22, 275, 280, 117, 279

80, 101, 56,   1,  23, 277, 281, 105, 280

**----------------------------------------------------------------------------------------------------------------------------------------------------

**下面为集合的定义：集合分为节点集合*Nset和单元集合*Elset，又分为下面两种：

**1.定义在Part或Instance数据块中的集合：这类集合出现在*Part和*End part之间（比如此例），或出现

**在*Instance和*End instance之间，一般用来定义

**界面属性。

**2.定义在Assembly数据块的集合：这类集合出现在*End Instance之后，*End assembly之前，一般用来定**义荷载，边界条件，接触或约束等。

**

**节点集合和单元集合的表示方法：

**1.如果集合中的节点或单元编号是连续的，可以表示为

**节点集合： *Nset， Nset=节点集合名称， Generate

**           起始节点编号，结束节点编号，节点编号增量

**单元集合： *Elset， Elset=单元集合名称，Generate

**           起始单元编号，结束单元编号，单元编号增量

**注意：节点集合和单元集合的名称不得超过80个字符，必须以字母或下划线开始。

**2.如果集合中的节点或单元编号是不连续的，表示方法为：依次列出集合中的所有节点或单元（每个数据行接点或单元编号不得超过16个），格式：

**节点集合： *Nset， Nset=节点集合名称

​             节点编号1，节点编号2，...节点编号16

**单元集合： Elset，Elset=单元集合名称

​             单元编号1，单元编号2，...单元编号16

**----------------------------------------------------------------------------------------------------------------------------------------------------

*Nset, nset=_PickedSet2, internal, generate

   1, 281,   1

*Elset, elset=_PickedSet2, internal, generate

 1,  80,  1

** Region: (Section-1:Picked)

*Elset, elset=_PickedSet2, internal, generate

 1,  80,  1

**----------------------------------------------------------------------------------------------------------------------------------------------------

**截面属性的基本表示方法为：*Solid Section， Elset=单元集合名称， Material=材料名称

**                          界面参数

**界面参数可以是二维模型的厚度或一维模型的截面面积等。材料名称不超过80个字符，必须以字母开头。

**----------------------------------------------------------------------------------------------------------------------------------------------------

** Section: Section-1

*Solid Section, elset=_PickedSet2, material=Steel

1.,

*End Part

**----------------------------------------------------------------------------------------------------------------------------------------------------

**定义Assembly数据块的格式为：*Assembly, Name=装配件名称

**                            ......

**                           *End Assembly

**省略号代表在Assembly数据块中的Instance数据块，以及定义在Assembly数据块中的几何数据块，以及面和约束有关的数据块。

**----------------------------------------------------------------------------------------------------------------------------------------------------   

** ASSEMBLY

**

*Assembly, name=Assembly

**---------------------------------------------------------------------------------------------------------------------------------------------------- 

**定义Instance数据块的格式为：*Instance， Name=实体名称，部件名称

**                            ......

**                           *End Instance

**在下面的格式中，不包含任何节点，单元，集合和截面属性等数据，因为文件中的实体是非独立实体，必**须在Part模块中定义。

**----------------------------------------------------------------------------------------------------------------------------------------------------

*Instance, name=Plate1-1, part=Plate1

*End Instance

**----------------------------------------------------------------------------------------------------------------------------------------------------

**定义在Assembly数据块中的集合表示方法与定义在Part或Instance数据块中的集合基本相同，只是需要在其后面加上参数 Instance=实体名称

**----------------------------------------------------------------------------------------------------------------------------------------------------

**

*Nset, nset=_PickedSet5, internal, instance=Plate1-1

  1,   2, 11,  12,  13, 14,  54,  55, 56, 102, 106, 109, 112, 260, 268, 276

 281,

*Elset, elset=_PickedSet5, internal, instance=Plate1-1

 1,  2,  3,  4, 68, 72, 76, 80

*Nset, nset=_PickedSet6, internal, instance=Plate1-1

  5,  6,   7, 27,  28,  29, 33,  34,  35, 152, 160, 168, 176, 178, 181, 184

 187,

*Elset, elset=_PickedSet6, internal, instance=Plate1-1

 20, 24, 28, 32, 33, 34, 35, 36

*Elset, elset=__PickedSurf4_S2, internal, instance=Plate1-1, generate

 36, 48,   4

*Elset, elset=__PickedSurf4_S1, internal, instance=Plate1-1, generate

 49, 52,   1

**----------------------------------------------------------------------------------------------------------------------------------------------------

**定义Surface数据块的格式为：*Surface， Type=面的类型， Name=面的名称

**                           构成面的集合1，名称1

**                           构成面的集合2，名称2

**                           ......

**像定义节点和单元集合一样，不需要使用*End Surface等语法来结束。

**----------------------------------------------------------------------------------------------------------------------------------------------------

*Surface, type=ELEMENT, name=_PickedSurf4, internal

__PickedSurf4_S2, S2

__PickedSurf4_S1, S1

*End Assembly

**----------------------------------------------------------------------------------------------------------------------------------------------------

**定义Material数据块的格式为：*Material， Name=材料名称

**                           *Elastic

**                           弹性模量，泊松比

**                           *Plastic

**                           屈服应力（列），塑性应变（列）

**                 还可以定义*Density等

**注意：所有使用Abaqus/Explicit的分析，都要使用*Density来定义密度。

**----------------------------------------------------------------------------------------------------------------------------------------------------

** MATERIALS

**

*Material, name=Steel

*Elastic

210000., 0.3

**----------------------------------------------------------------------------------------------------------------------------------------------------

**定义Boundary Condition数据块的格式（以边界条件为例，速度等以此类推）：

**                               *Boundary

**                                                 节点编号或节点集合，约定的边界条件类型

**注意：如果一个边界条件定义在初始步（Initial Step）中则相应的Boundary数据块出现在*Step之前；

**     如果一个边界条件定义在后续分析步中，则相应的Boundary数据块出现在此后续分析步的*Step

**和*End Step之间。

**----------------------------------------------------------------------------------------------------------------------------------------------------

** BOUNDARY CONDITIONS

**

** Name: Fix-X Type: Symmetry/Antisymmetry/Encastre

*Boundary

_PickedSet5, XSYMM

** Name: Fix-Y Type: Symmetry/Antisymmetry/Encastre

*Boundary

_PickedSet6, YSYMM

**----------------------------------------------------------------------------------------------------------------------------------------------------

**定义Step数据块的格式为（以静力分析为例）：*Step， Name=分析部名称

**                                          *Static

**                                         初始增量步，分析时间，最小增量步，最大增量步

**----------------------------------------------------------------------------------------------------------------------------------------------------

** STEP: Apply Load

**

*Step, name="Apply Load"

*Static

1., 1., 1e-05, 1.

**----------------------------------------------------------------------------------------------------------------------------------------------------

**定义载荷Load数据块的格式：1. 集中载荷： *Cload

**                                         节点编号或节点集合，自由度编号，载荷值

**                         2. 定义在单元上的分布荷载：*Dload

**                                                     单元编号或单元集合，载荷类型的代码

**                         3.定义在面上的分布载荷：*DSload

**                                                     面的名称，载荷类型的代码，载荷值

**注意：描述载荷的关键词为：集中载荷*Cload （Concentrated Load），定义在单元上的分布载荷*Dload

**（Distributing Load）和定义在面上

**的分布载荷*DSload（Distributing Surface Load）。

**     在Dload和DSload中的载荷类型的代码，从ABAQUS Analysis User's Manual的Distributing loads查**找。下例的P代表均布面荷载。**

**----------------------------------------------------------------------------------------------------------------------------------------------------

** LOADS

**

** Name: Load-1   Type: Pressure

*Dsload

_PickedSurf4, P, -100.

**

** OUTPUT REQUESTS

*Restart, write, frequency=0

**----------------------------------------------------------------------------------------------------------------------------------------------------

**不输出用于重启动分析的数据。

**----------------------------------------------------------------------------------------------------------------------------------------------------

** FIELD OUTPUT: F-Output-1

**

*Output, field, variable=PRESELECT

**----------------------------------------------------------------------------------------------------------------------------------------------------

**将Abaqus默认的场变量写入ODB文件。

**----------------------------------------------------------------------------------------------------------------------------------------------------

** HISTORY OUTPUT: H-Output-1

**

*Output, history, variable=PRESELECT

**----------------------------------------------------------------------------------------------------------------------------------------------------

**将Abaqus默认的历史变量写入ODB文件。

**----------------------------------------------------------------------------------------------------------------------------------------------------

*End Step
```

